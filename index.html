<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NY VIP SUPREME AI</title>
<link href="https://fonts.googleapis.com/css2?family=Rajdhani:wght@500;700&family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
<style>
:root {
    --bg:#0b0f1a; --card-bg:#121722; --text-main:#f4f6f9; --text-sub:#94a3b8;
    --accent:#6366f1; --win:#10b981; --loss:#ef4444; --shadow:0 10px 30px -5px rgba(0,0,0,0.5);
}
body{margin:0;padding:0;font-family:'Inter',sans-serif;background:var(--bg);color:var(--text-main);}
.header{text-align:center;padding:15px 0;}
.logo{font-family:'Rajdhani',sans-serif;font-size:36px;font-weight:800;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.subtitle{font-size:12px;color:var(--text-sub);letter-spacing:2px;margin-top:-5px;}
.container{max-width:480px;margin:0 auto;padding:10px;display:flex;flex-direction:column;gap:15px;}
.period-bar{display:flex;justify-content:space-between;background:#1f2430;padding:8px 12px;border-radius:12px;font-size:14px;font-weight:600;}
.period-bar span{color:var(--text-main);}
.prediction-box{text-align:center;background:#1f2430;padding:15px;border-radius:16px;box-shadow:var(--shadow);}
.prediction-box small{display:block;color:var(--text-sub);margin-bottom:8px;}
.pred-result{font-size:48px;font-weight:800;margin-bottom:10px;transition: all 0.3s;}
.pred-result.BIG{background:linear-gradient(135deg,#FF9966 0%,#FF5E62 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.pred-result.SMALL{background:linear-gradient(135deg,#56CCF2 0%,#2F80ED 100%);-webkit-background-clip:text;-webkit-text-fill-color:transparent;}
.confidence-bar{height:6px;background:#2a2f3a;border-radius:3px;overflow:hidden;margin:0 auto 6px;}
.confidence-fill{height:100%;width:0%;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);transition:width 1s;}
.conf-text{font-size:11px;color:var(--accent);font-weight:700;}
.table-container{max-height:250px;overflow-y:auto;background:#1f2430;border-radius:16px;padding:6px;}
table{width:100%;border-collapse:collapse;font-size:12px;}
th{color:var(--text-sub);padding:8px;text-align:center;}
td{color:var(--text-main);padding:8px;text-align:center;}
.win-tag{background:var(--win);color:#fff;padding:2px 6px;border-radius:6px;font-size:10px;font-weight:700;}
.loss-tag{background:var(--loss);color:#fff;padding:2px 6px;border-radius:6px;font-size:10px;font-weight:700;}
</style>
</head>
<body>

<div class="header">
    <div class="logo">NY VIP SUPREME AI</div>
    <div class="subtitle">NEURAL DECISION SYSTEM</div>
</div>

<div class="container">

    <div class="period-bar">
        <span id="pID">ISSUE...</span>
        <span id="timer">00:00</span>
    </div>

    <div class="prediction-box">
        <small>AI CONSENSUS</small>
        <div class="pred-result" id="pRes">---</div>
        <div class="confidence-bar"><div class="confidence-fill" id="confFill"></div></div>
        <div class="conf-text" id="confText">WAITING DATA...</div>
    </div>

    <div class="table-container">
        <table>
            <thead>
                <tr><th>PERIOD</th><th>PRED</th><th>NUM</th><th>STATUS</th></tr>
            </thead>
            <tbody id="logs">
                <!-- EMPTY INITIALLY -->
            </tbody>
        </table>
    </div>

</div>

<script>
const API_URL="https://draw.ar-lottery01.com/WinGo/WinGo_1M/GetHistoryIssuePage.json";

let savedPred=null; // store last prediction
let firstPredictionDone=false;

// --- TIMER ---
function startTimer(){
    setInterval(()=>{
        const now=new Date();
        const utc=new Date(now.toUTCString());
        const seconds=utc.getUTCSeconds();
        const remaining=60-seconds;
        const hours=utc.getUTCHours();
        const minutes=utc.getUTCMinutes();
        const totalMinutes=hours*60+minutes;
        const dateStr=new Intl.DateTimeFormat('en-GB',{year:'numeric',month:'2-digit',day:'2-digit',timeZone:'UTC'}).format(utc).replace(/\//g,'');
        const periodNumber="1000"+(10001+totalMinutes);
        const fullPeriod=`${dateStr}${periodNumber}`;
        document.getElementById("pID").innerText=`Period: ${fullPeriod}`;
        document.getElementById("timer").innerText=`Timer: ${remaining<10?'0':''}${remaining}s`;
    },1000);
}

// --- SIMPLE AI USING ONLY HISTORY ---
function runAI(numbers){
    if(numbers.length===0) return {prediction:"---",confidence:0,breakdown:[]};
    const votes=numbers.slice(0,5).map(n=>n>=5?"BIG":"SMALL");
    const bigs=votes.filter(v=>"BIG"===v).length;
    const total=votes.length;
    return {prediction:bigs>total/2?"BIG":"SMALL",confidence:Math.max(bigs,total-bigs)/total*100,breakdown:votes};
}

// --- FETCH HISTORY AND UPDATE ONLY AFTER FIRST PREDICTION ---
async function fetchHistory(){
    try{
        const res=await fetch(API_URL);
        const json=await res.json();
        const list=json.data.list.slice(0,50);
        const numbers=list.map(i=>parseInt(i.number));
        const ai=runAI(numbers);

        // Update AI prediction box
        const pRes=document.getElementById("pRes");
        pRes.innerText=ai.prediction;
        pRes.className="pred-result "+ai.prediction;
        document.getElementById("confFill").style.width=ai.confidence+"%";
        document.getElementById("confText").innerText=`AI CONFIDENCE: ${ai.confidence.toFixed(1)}% | ${ai.breakdown.filter(x=>"BIG"===x).length}B vs ${ai.breakdown.filter(x=>"SMALL"===x).length}S`;

        // Start storing history only after first prediction
        if(!firstPredictionDone){
            savedPred=ai.prediction;
            firstPredictionDone=true;
            return; // Don't store anything yet
        }

        // Store in table after first prediction
        const logs=document.getElementById("logs");
        const actual=parseInt(list[0].number)>=5?"BIG":"SMALL";
        const isWin=savedPred===actual;

        const row=`<tr>
            <td>${list[0].issueNumber.slice(-3)}</td>
            <td>${savedPred}</td>
            <td>${list[0].number}</td>
            <td><span class="${isWin?'win-tag':'loss-tag'}">${isWin?'WIN':'LOSS'}</span></td>
        </tr>`;
        logs.innerHTML=row+logs.innerHTML;

        // Save current prediction for next round
        savedPred=ai.prediction;

    }catch(e){console.error(e);}
}

// --- START ---
startTimer();
setTimeout(fetchHistory,1500);
setInterval(fetchHistory,5000);
</script>

</body>
</html>